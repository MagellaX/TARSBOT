name: tars

services:
  tars-desktop:
    # Build from source
    build:
      context: ../packages/
      dockerfile: tarsd/Dockerfile
    # Use pre-built image
    image: ${TARS_IMAGE_REGISTRY:-ghcr.io/magellax}/tars-desktop:edge
    shm_size: "2g"
    container_name: tars-desktop
    restart: unless-stopped
    hostname: computer
    privileged: true
    ports:
      - "${TARS_DESKTOP_HOST_PORT:-9990}:9990" # tarsd service & noVNC
    environment:
      - DISPLAY=:0
